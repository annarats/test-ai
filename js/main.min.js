document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".js-burger"),e=document.querySelector(".js-nav"),t=document.querySelector(".js-overlay"),c=document.querySelector("#modal-access"),i=document.querySelectorAll(".js-open-modal"),o=document.querySelectorAll(".js-close-modal"),n=document.querySelector(".form"),a=document.querySelector(".form__input");if(!(s&&e&&t&&c))return;const r=()=>{const i=e.classList.contains("is-active");s.classList.toggle("is-active"),e.classList.toggle("is-active"),t.classList.toggle("is-active"),i?c.classList.contains("is-open")||document.body.classList.remove("no-scroll"):document.body.classList.add("no-scroll")};s.addEventListener("click",r),t.addEventListener("click",()=>{e.classList.contains("is-active")&&r()});e.querySelectorAll("a").forEach(s=>{s.addEventListener("click",()=>{e.classList.contains("is-active")&&r()})});const l=()=>{e.classList.contains("is-active")&&r(),c.classList.add("is-open"),document.body.classList.add("no-scroll"),a&&setTimeout(()=>a.focus(),50)},d=()=>{c.classList.remove("is-open"),a&&a.classList.remove("is-error"),e.classList.contains("is-active")||document.body.classList.remove("no-scroll")};if(i.forEach(s=>s.addEventListener("click",l)),o.forEach(s=>s.addEventListener("click",d)),c.addEventListener("click",s=>{s.target===c&&d()}),n&&a){const s=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s);n.addEventListener("submit",e=>{e.preventDefault();const t=a.value.trim();s(t)?(a.classList.remove("is-error"),console.log("Success:",t),alert("Доступ получен!"),d()):(a.classList.add("is-error"),a.focus())}),a.addEventListener("input",()=>{a.classList.remove("is-error")})}document.addEventListener("keydown",s=>{"Escape"===s.key&&(c.classList.contains("is-open")?d():e.classList.contains("is-active")&&r())}),window.addEventListener("resize",()=>{window.innerWidth>768&&e.classList.contains("is-active")&&(s.classList.remove("is-active"),e.classList.remove("is-active"),t.classList.remove("is-active"),c.classList.contains("is-open")||document.body.classList.remove("no-scroll"))})});